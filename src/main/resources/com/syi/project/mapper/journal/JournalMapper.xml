<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- MyBatis 매퍼 XML 파일의 시작 -->
<mapper namespace="com.syi.project.mapper.journal.JournalMapper">

	<resultMap id="journalResultMap" type="com.syi.project.model.journal.JournalVO">
	    <id property="journalNo" column="JOURNAL_NO"/>
	    <result property="journalWriteDate" column="JOURNAL_WRITEDATE"/>
	    <result property="journalRegDate" column="JOURNAL_REGDATE"/>
	    <result property="journalModify" column="JOURNAL_MODIFY"/>
	    <result property="journalTitle" column="JOURNAL_TITLE"/>
	    <result property="fileName" column="FILE_NAME"/>
	</resultMap>

	<!-- 일지 등록  -->
	<insert id="journalEnroll" parameterType="com.syi.project.model.journal.JournalVO">
		INSERT INTO JOURNAL (JOURNAL_TITLE, JOURNAL_WRITEDATE, FILE_NAME)
		VALUES
		(#{journalTitle}, #{journalWriteDate}, #{fileName})
	</insert>

	<!-- 일지 목록 조회 쿼리 -->
	<select id="journalList" resultMap="journalResultMap">
	    select * 
	    from journal
	    order by journal_no desc
	</select>

	<!-- 일지 총 갯수 조회 쿼리 -->
	<select id="journalGetTotal" resultType="int">
		select count(*) from journal

		<if test="keyword != null">
			where journal_title like '%' || #{keyword} || '%'
		</if>
	</select>
	
	<!-- 일지 상세 조회 -->
	<select id="journalDetail" resultMap="journalResultMap">
		select * from journal where journal_no = #{journalNo}
	</select>

</mapper>
